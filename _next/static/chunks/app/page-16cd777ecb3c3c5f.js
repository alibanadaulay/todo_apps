(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{52246:function(e,t,r){Promise.resolve().then(r.bind(r,80027))},80027:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return e5}});var a=r(57437),s=r(2265),l=r(71424),i=r(54829),n=r(25566);let d=n.env.NEXT_PUBLIC_API_URL||"http://localhost:8080/api/v1",o=e=>({id:e.id,title:e.title,description:e.description,completed:e.completed,createdAt:new Date(e.createdAt),dueDate:new Date(e.dueDate),priority:e.priority,imageUrl:e.imageUrl,updatedAt:e.updatedAt?new Date(e.updatedAt):void 0,recurring:{isRecurring:!1,frequency:null,daysOfWeek:[]}}),c=async()=>{let e=await i.Z.get("".concat(d,"/tasks"));if(!e.data||!e.data.data||!e.data.data.tasks)throw Error("Invalid response format");return e.data.data.tasks.map(o)},u=async e=>{let t={...e,dueDate:e.dueDate instanceof Date?e.dueDate.toISOString():e.dueDate},r=await i.Z.post("".concat(d,"/tasks"),t);if(!r.data||!r.data.data)throw Error("Invalid response format");return o(r.data.data)},m=async(e,t)=>{let r=await i.Z.put("".concat(d,"/tasks/").concat(e),t);if(!r.data||!r.data.data)throw Error("Invalid response format");return o(r.data.data)},x=async e=>{let t=await i.Z.delete("".concat(d,"/tasks/").concat(e));if(!t.data||!t.data.success)throw Error("Failed to delete task")},f=(0,s.createContext)(void 0),h=e=>({id:String(e.id),title:e.title,description:e.description||"",completed:e.completed,createdAt:new Date(e.createdAt),dueDate:new Date(e.dueDate),priority:e.priority,recurring:e.recurring||{isRecurring:!1,frequency:null},imageUrl:e.imageUrl});function p(e){let{children:t}=e,[r,i]=(0,s.useState)([]),[n,d]=(0,s.useState)(!1),[o,p]=(0,s.useState)(null),[g,j]=(0,s.useState)({status:"all",sortBy:"date"});(0,s.useEffect)(()=>{let e=async()=>{try{d(!0),p(null);let e=await c();i(e.map(h))}catch(e){p("Failed to fetch todos"),console.error(e),l.Am.error("Failed to fetch todos")}finally{d(!1)}};e()},[]);let y=async e=>{try{var t;d(!0),p(null);let r={title:e.title,description:e.description||"",dueDate:(null===(t=e.dueDate)||void 0===t?void 0:t.toISOString())||new Date().toISOString(),priority:e.priority||"medium",recurring:{isRecurring:!1,frequency:null},imageUrl:e.imageUrl},a=await u(r),s=h(a);i(e=>[s,...e]),l.Am.success("Todo added successfully")}catch(e){p("Failed to add todo"),console.error(e),l.Am.error("Failed to add todo")}finally{d(!1)}},v=async(e,t)=>{try{d(!0),p(null);let r=await m(e,{title:t.title,description:t.description||"",completed:t.completed,dueDate:t.dueDate,priority:t.priority,recurring:{isRecurring:!1,frequency:null},imageUrl:t.imageUrl}),a=h(r);i(t=>t.map(t=>t.id===e?a:t)),l.Am.success("Todo updated successfully")}catch(e){p("Failed to update todo"),console.error(e),l.Am.error("Failed to update todo")}finally{d(!1)}},b=async e=>{try{d(!0),p(null),await x(e),i(t=>t.filter(t=>t.id!==e)),l.Am.success("Todo removed successfully")}catch(e){p("Failed to delete todo"),console.error(e),l.Am.error("Failed to delete todo")}finally{d(!1)}},N=async e=>{let t=r.find(t=>t.id===e);if(t)try{d(!0),p(null);let r=await m(e,{title:t.title,description:t.description||"",completed:!t.completed,dueDate:t.dueDate,priority:t.priority,recurring:{isRecurring:!1,frequency:null},imageUrl:t.imageUrl}),a=h(r);i(t=>t.map(t=>t.id===e?a:t))}catch(e){p("Failed to toggle todo"),console.error(e),l.Am.error("Failed to toggle todo")}finally{d(!1)}};return(0,a.jsx)(f.Provider,{value:{todos:r,filters:g,loading:n,error:o,addTodo:y,updateTodo:v,deleteTodo:b,toggleComplete:N,setFilters:e=>{j(t=>({...t,...e}))}},children:t})}function g(){let e=(0,s.useContext)(f);if(void 0===e)throw Error("useTodo must be used within a TodoProvider");return e}var j=r(6141),y=r(53905),v=r(45367),b=r(67256),N=r(39213),w=r(57042),k=r(74769);function D(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,k.m6)((0,w.W)(t))}let C=(0,N.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),R=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:i=!1,...n}=e,d=i?b.g7:"button";return(0,a.jsx)(d,{className:D(C({variant:s,size:l,className:r})),ref:t,...n})});R.displayName="Button";var z=r(66062),T=r(62442);let F=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(z.fC,{ref:t,className:D("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,a.jsx)(z.z$,{className:D("flex items-center justify-center text-current"),children:(0,a.jsx)(T.Z,{className:"h-4 w-4"})})})});F.displayName=z.fC.displayName;var S=r(88175),A=r(6834),Z=r(12167),q=r(74578),O=r(61865),U=r(38110),I=r(28712),P=r(82549);let W=I.fC;I.xz;let E=I.h_;I.x8;let V=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(I.aV,{ref:t,className:D("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});V.displayName=I.aV.displayName;let _=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(E,{children:[(0,a.jsx)(V,{}),(0,a.jsxs)(I.VY,{ref:t,className:D("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...l,children:[s,(0,a.jsxs)(I.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});_.displayName=I.VY.displayName;let M=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:D("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};M.displayName="DialogHeader";let B=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:D("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};B.displayName="DialogFooter";let L=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(I.Dx,{ref:t,className:D("text-lg font-semibold leading-none tracking-tight",r),...s})});L.displayName=I.Dx.displayName;let H=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(I.dk,{ref:t,className:D("text-sm text-muted-foreground",r),...s})});H.displayName=I.dk.displayName;var G=r(36743);let Y=(0,N.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),$=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(G.f,{ref:t,className:D(Y(),r),...s})});$.displayName=G.f.displayName;let J=O.RV,X=s.createContext({}),Q=e=>{let{...t}=e;return(0,a.jsx)(X.Provider,{value:{name:t.name},children:(0,a.jsx)(O.Qr,{...t})})},K=()=>{let e=s.useContext(X),t=s.useContext(ee),{getFieldState:r,formState:a}=(0,O.Gc)(),l=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},ee=s.createContext({}),et=s.forwardRef((e,t)=>{let{className:r,...l}=e,i=s.useId();return(0,a.jsx)(ee.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:t,className:D("space-y-2",r),...l})})});et.displayName="FormItem";let er=s.forwardRef((e,t)=>{let{className:r,...s}=e,{error:l,formItemId:i}=K();return(0,a.jsx)($,{ref:t,className:D(l&&"text-destructive",r),htmlFor:i,...s})});er.displayName="FormLabel";let ea=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:l,formDescriptionId:i,formMessageId:n}=K();return(0,a.jsx)(b.g7,{ref:t,id:l,"aria-describedby":s?"".concat(i," ").concat(n):"".concat(i),"aria-invalid":!!s,...r})});ea.displayName="FormControl";let es=s.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:l}=K();return(0,a.jsx)("p",{ref:t,id:l,className:D("text-sm text-muted-foreground",r),...s})});es.displayName="FormDescription";let el=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e,{error:i,formMessageId:n}=K(),d=i?String(null==i?void 0:i.message):s;return d?(0,a.jsx)("p",{ref:t,id:n,className:D("text-sm font-medium text-destructive",r),...l,children:d}):null});el.displayName="FormMessage";let ei=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:D("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});ei.displayName="Input";let en=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:D("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});en.displayName="Textarea";var ed=r(5762),eo=r(83523),ec=r(9224);let eu=ed.fC;ed.ZA;let em=ed.B4,ex=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(ed.xz,{ref:t,className:D("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[s,(0,a.jsx)(ed.JO,{asChild:!0,children:(0,a.jsx)(eo.Z,{className:"h-4 w-4 opacity-50"})})]})});ex.displayName=ed.xz.displayName;let ef=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(ed.u_,{ref:t,className:D("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(ec.Z,{className:"h-4 w-4"})})});ef.displayName=ed.u_.displayName;let eh=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(ed.$G,{ref:t,className:D("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(eo.Z,{className:"h-4 w-4"})})});eh.displayName=ed.$G.displayName;let ep=s.forwardRef((e,t)=>{let{className:r,children:s,position:l="popper",...i}=e;return(0,a.jsx)(ed.h_,{children:(0,a.jsxs)(ed.VY,{ref:t,className:D("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...i,children:[(0,a.jsx)(ef,{}),(0,a.jsx)(ed.l_,{className:D("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(eh,{})]})})});ep.displayName=ed.VY.displayName;let eg=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(ed.__,{ref:t,className:D("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})});eg.displayName=ed.__.displayName;let ej=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(ed.ck,{ref:t,className:D("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(ed.wU,{children:(0,a.jsx)(T.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(ed.eT,{children:s})]})});ej.displayName=ed.ck.displayName;let ey=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(ed.Z0,{ref:t,className:D("-mx-1 my-1 h-px bg-muted",r),...s})});ey.displayName=ed.Z0.displayName;var ev=r(92376);let eb=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(ev.fC,{className:D("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...s,ref:t,children:(0,a.jsx)(ev.bU,{className:D("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});eb.displayName=ev.fC.displayName;var eN=r(63715),ew=r(38438),ek=r(16691),eD=r.n(ek),eC=r(25566);let eR=eC.env.NEXT_PUBLIC_API_URL||"http://localhost:8080";function ez(e){let{value:t,onChange:r}=e,[i,n]=(0,s.useState)(!1),[d,o]=(0,s.useState)(t),c=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(a.type)){l.Am.error("Please upload a valid image file (JPEG, PNG, GIF, or WebP)");return}if(a.size>5242880){l.Am.error("Image size should be less than 5MB");return}try{n(!0);let e=new FormData;e.append("file",a);let t=await fetch("".concat(eR,"/api/upload"),{method:"POST",body:e});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to upload image")}let s=await t.json(),i="".concat(eR,"/").concat(s.path);o(i),r(i),l.Am.success(s.message||"Image uploaded successfully")}catch(e){console.error("Error uploading image:",e),l.Am.error(e instanceof Error?e.message:"Failed to upload image")}finally{n(!1)}}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(R,{type:"button",variant:"outline",className:"relative",onClick:()=>{var e;return null===(e=document.getElementById("image-upload"))||void 0===e?void 0:e.click()},disabled:i,children:[i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eN.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ew.Z,{className:"h-4 w-4 mr-2"}),"Upload Image"]}),(0,a.jsx)("input",{id:"image-upload",type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",className:"hidden",onChange:c,disabled:i})]}),d&&(0,a.jsx)(R,{type:"button",variant:"destructive",size:"icon",onClick:()=>{o(void 0),r(void 0)},disabled:i,children:(0,a.jsx)(P.Z,{className:"h-4 w-4"})})]}),d&&(0,a.jsx)("div",{className:"relative w-full h-48",children:(0,a.jsx)(eD(),{src:d,alt:"Todo image",fill:!0,className:"object-contain rounded-lg"})})]})}let eT=q.z.object({title:q.z.string().min(1,"Title is required").max(100),description:q.z.string().max(500).optional(),priority:q.z.enum(["low","medium","high"]),dueDate:q.z.string().min(1,"Due date is required"),dueTime:q.z.string().min(1,"Due time is required"),isRecurring:q.z.boolean().default(!1),frequency:q.z.enum(["daily","weekly"]).nullable(),daysOfWeek:q.z.array(q.z.number()).optional(),imageUrl:q.z.string().optional()}),eF=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];function eS(e){let{todo:t,open:r,onOpenChange:l}=e,{updateTodo:i}=g(),[n,d]=(0,s.useState)(!1),o=(0,O.cI)({resolver:(0,U.F)(eT),defaultValues:{title:t.title,description:t.description||"",priority:t.priority,dueDate:(0,S.ZP)(t.dueDate,"yyyy-MM-dd"),dueTime:(0,S.ZP)(t.dueDate,"HH:mm"),isRecurring:t.recurring.isRecurring,frequency:t.recurring.frequency,daysOfWeek:t.recurring.daysOfWeek||[],imageUrl:t.imageUrl}}),c=o.watch("isRecurring"),u=o.watch("frequency");async function m(e){d(!0);try{let r=new Date("".concat(e.dueDate,"T").concat(e.dueTime));await i(t.id,{title:e.title,description:e.description,dueDate:r,priority:e.priority,recurring:{isRecurring:e.isRecurring,frequency:e.frequency,daysOfWeek:"weekly"===e.frequency?e.daysOfWeek:void 0},imageUrl:e.imageUrl}),l(!1)}finally{d(!1)}}return(0,a.jsx)(W,{open:r,onOpenChange:l,children:(0,a.jsxs)(_,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(M,{children:(0,a.jsx)(L,{children:"Edit Todo"})}),(0,a.jsx)(J,{...o,children:(0,a.jsxs)("form",{onSubmit:o.handleSubmit(m),className:"space-y-4",children:[(0,a.jsx)(Q,{control:o.control,name:"title",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Title"}),(0,a.jsx)(ea,{children:(0,a.jsx)(ei,{placeholder:"Enter todo title",...t})}),(0,a.jsx)(el,{})]})}}),(0,a.jsx)(Q,{control:o.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Description"}),(0,a.jsx)(ea,{children:(0,a.jsx)(en,{placeholder:"Enter todo description (optional)",...t})}),(0,a.jsx)(el,{})]})}}),(0,a.jsx)(Q,{control:o.control,name:"imageUrl",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Image (optional)"}),(0,a.jsx)(ea,{children:(0,a.jsx)(ez,{value:t.value,onChange:t.onChange})}),(0,a.jsx)(el,{})]})}}),(0,a.jsx)(Q,{control:o.control,name:"priority",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Priority"}),(0,a.jsxs)(eu,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,a.jsx)(ea,{children:(0,a.jsx)(ex,{children:(0,a.jsx)(em,{placeholder:"Select priority"})})}),(0,a.jsxs)(ep,{children:[(0,a.jsx)(ej,{value:"low",children:"Low"}),(0,a.jsx)(ej,{value:"medium",children:"Medium"}),(0,a.jsx)(ej,{value:"high",children:"High"})]})]}),(0,a.jsx)(el,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(Q,{control:o.control,name:"dueDate",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Due Date"}),(0,a.jsx)(ea,{children:(0,a.jsx)(ei,{type:"date",...t})}),(0,a.jsx)(el,{})]})}}),(0,a.jsx)(Q,{control:o.control,name:"dueTime",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Due Time"}),(0,a.jsx)(ea,{children:(0,a.jsx)(ei,{type:"time",...t})}),(0,a.jsx)(el,{})]})}})]}),(0,a.jsx)(Q,{control:o.control,name:"isRecurring",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(er,{className:"text-base",children:"Recurring"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Make this todo repeat"})]}),(0,a.jsx)(ea,{children:(0,a.jsx)(eb,{checked:t.value,onCheckedChange:t.onChange})})]})}}),c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Q,{control:o.control,name:"frequency",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Frequency"}),(0,a.jsxs)(eu,{onValueChange:t.onChange,defaultValue:t.value||void 0,children:[(0,a.jsx)(ea,{children:(0,a.jsx)(ex,{children:(0,a.jsx)(em,{placeholder:"Select frequency"})})}),(0,a.jsxs)(ep,{children:[(0,a.jsx)(ej,{value:"daily",children:"Daily"}),(0,a.jsx)(ej,{value:"weekly",children:"Weekly"})]})]}),(0,a.jsx)(el,{})]})}}),"weekly"===u&&(0,a.jsx)(Q,{control:o.control,name:"daysOfWeek",render:()=>(0,a.jsxs)(et,{children:[(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)(er,{children:"Days of Week"})}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:eF.map(e=>(0,a.jsx)(Q,{control:o.control,name:"daysOfWeek",render:t=>{var r;let{field:s}=t;return(0,a.jsxs)(et,{className:"flex flex-row items-start space-x-0 space-y-0",children:[(0,a.jsx)(ea,{children:(0,a.jsx)(F,{checked:null===(r=s.value)||void 0===r?void 0:r.includes(e.value),onCheckedChange:t=>{let r=s.value||[];return t?s.onChange([...r,e.value]):s.onChange(r.filter(t=>t!==e.value))}})}),(0,a.jsx)(er,{className:"font-normal ml-2",children:e.label})]},e.value)}},e.value))}),(0,a.jsx)(el,{})]})})]}),(0,a.jsx)(B,{children:(0,a.jsx)(R,{type:"submit",disabled:n,children:n?"Saving...":"Save Changes"})})]})})]})})}var eA=r(52506);let eZ=eA.fC;eA.xz;let eq=eA.h_,eO=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(eA.aV,{className:D("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:t})});eO.displayName=eA.aV.displayName;let eU=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsxs)(eq,{children:[(0,a.jsx)(eO,{}),(0,a.jsx)(eA.VY,{ref:t,className:D("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});eU.displayName=eA.VY.displayName;let eI=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:D("flex flex-col space-y-2 text-center sm:text-left",t),...r})};eI.displayName="AlertDialogHeader";let eP=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:D("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};eP.displayName="AlertDialogFooter";let eW=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(eA.Dx,{ref:t,className:D("text-lg font-semibold",r),...s})});eW.displayName=eA.Dx.displayName;let eE=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(eA.dk,{ref:t,className:D("text-sm text-muted-foreground",r),...s})});eE.displayName=eA.dk.displayName;let eV=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(eA.aU,{ref:t,className:D(C(),r),...s})});eV.displayName=eA.aU.displayName;let e_=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(eA.$j,{ref:t,className:D(C({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});function eM(e){let{todoId:t,todoTitle:r,open:s,onOpenChange:l}=e,{deleteTodo:i}=g(),n=async()=>{try{await i(t),l(!1)}catch(e){console.error("Failed to delete todo:",e)}};return(0,a.jsx)(eZ,{open:s,onOpenChange:l,children:(0,a.jsxs)(eU,{children:[(0,a.jsxs)(eI,{children:[(0,a.jsx)(eW,{children:"Are you sure?"}),(0,a.jsxs)(eE,{children:['This will permanently delete the todo "',r,'" and cannot be undone.']})]}),(0,a.jsxs)(eP,{children:[(0,a.jsx)(e_,{children:"Cancel"}),(0,a.jsx)(eV,{onClick:n,className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})})}function eB(e){var t;let{todo:r}=e,{toggleComplete:l}=g(),[i,n]=(0,s.useState)(!1),[d,o]=(0,s.useState)(!1),c=function(e){switch(e){case"high":return"text-red-500 border-red-500";case"medium":return"text-amber-500 border-amber-500";case"low":return"text-green-500 border-green-500";default:return"text-slate-500 border-slate-500"}}(r.priority),u=function(e){if(!e.recurring.isRecurring)return"";if("daily"===e.recurring.frequency)return"Repeats daily";if("weekly"===e.recurring.frequency&&e.recurring.daysOfWeek){let t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=e.recurring.daysOfWeek.map(e=>t[e]).join(", ");return"Repeats weekly on ".concat(r)}return""}(r);return(0,a.jsxs)("div",{className:D("p-4 border rounded-lg transition-all bg-card","hover:shadow-md",r.completed&&"bg-muted/40"),children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(F,{checked:r.completed,onCheckedChange:()=>l(r.id),className:"mt-1"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsx)("h3",{className:D("font-medium truncate",r.completed&&"line-through text-muted-foreground"),children:r.title}),(0,a.jsx)("div",{className:"flex items-center gap-1 shrink-0",children:(0,a.jsx)("span",{className:D("text-xs px-2 py-0.5 rounded-full border capitalize",c),children:r.priority})})]}),r.description&&(0,a.jsx)("p",{className:D("text-sm mt-1 text-muted-foreground",r.completed&&"line-through"),children:r.description}),r.imageUrl&&(0,a.jsx)("div",{className:"relative w-full h-48 mt-2",children:(0,a.jsx)(eD(),{src:r.imageUrl,alt:"".concat(r.title," image"),fill:!0,className:"object-contain rounded-lg"})}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2 text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(j.Z,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{children:(t=r.dueDate,(0,A.Z)(t)?"Today at ".concat((0,S.ZP)(t,"h:mm a")):(0,Z.Z)(t)?"Tomorrow at ".concat((0,S.ZP)(t,"h:mm a")):(0,S.ZP)(t,"MMM d, yyyy h:mm a"))})]}),u&&(0,a.jsx)("span",{className:"px-1.5 py-0.5 bg-secondary rounded-full",children:u})]}),(0,a.jsxs)("div",{className:"flex items-center mt-2 pt-2 border-t text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Created ",r.createdAt.toLocaleDateString()]}),(0,a.jsxs)("div",{className:"flex ml-auto gap-1",children:[(0,a.jsxs)(R,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>n(!0),children:[(0,a.jsx)(y.Z,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,a.jsxs)(R,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive",onClick:()=>o(!0),children:[(0,a.jsx)(v.Z,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{className:"sr-only",children:"Delete"})]})]})]})]})]}),(0,a.jsx)(eS,{todo:r,open:i,onOpenChange:n}),(0,a.jsx)(eM,{todoId:r.id,todoTitle:r.title,open:d,onOpenChange:o})]})}e_.displayName=eA.$j.displayName;var eL=r(6379);function eH(){let e;let{todos:t,filters:r}=g(),s=(e=[...t],"active"===r.status?e=e.filter(e=>!e.completed):"completed"===r.status&&(e=e.filter(e=>e.completed)),e.sort((e,t)=>{switch(r.sortBy){case"alphabetical":return e.title.localeCompare(t.title);case"date":return t.createdAt.getTime()-e.createdAt.getTime();case"dueDate":return e.dueDate.getTime()-t.dueDate.getTime();case"priority":let a={high:3,medium:2,low:1};return a[t.priority]-a[e.priority];default:return 0}}),e);return 0===t.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-center border rounded-lg bg-card",children:[(0,a.jsx)(eL.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-1",children:"No todos yet"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Add your first todo to get started"})]}):0===s.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-center border rounded-lg bg-card",children:[(0,a.jsx)(eL.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-1",children:"No matching todos"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Try changing your filters"})]}):(0,a.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,a.jsx)(eB,{todo:e},e.id))})}var eG=r(62681),eY=r(42482),e$=r(9883);let eJ=q.z.object({title:q.z.string().min(1,"Title is required").max(100),description:q.z.string().max(500).optional(),priority:q.z.enum(["low","medium","high"]).default("medium"),dueDate:q.z.string().min(1,"Due date is required"),dueTime:q.z.string().min(1,"Due time is required"),isRecurring:q.z.boolean().default(!1),frequency:q.z.enum(["daily","weekly"]).nullable(),daysOfWeek:q.z.array(q.z.number()).optional(),image:q.z.string().optional()}),eX=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];function eQ(e){let{open:t,onOpenChange:r}=e,{addTodo:l}=g(),[i,n]=(0,s.useState)(!1),d=(0,O.cI)({resolver:(0,U.F)(eJ),defaultValues:{title:"",description:"",priority:"medium",dueDate:(0,S.ZP)(new Date,"yyyy-MM-dd"),dueTime:(0,S.ZP)(new Date,"HH:mm"),isRecurring:!1,frequency:null,daysOfWeek:[],image:void 0}}),o=d.watch("isRecurring"),c=d.watch("frequency");return(0,a.jsx)(W,{open:t,onOpenChange:r,children:(0,a.jsxs)(_,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(M,{children:(0,a.jsx)(L,{children:"Add New Todo"})}),(0,a.jsx)(J,{...d,children:(0,a.jsxs)("form",{onSubmit:d.handleSubmit(function(e){n(!0);try{let t=new Date("".concat(e.dueDate,"T").concat(e.dueTime));l({title:e.title,description:e.description,completed:!1,dueDate:t,priority:e.priority,recurring:{isRecurring:e.isRecurring,frequency:e.frequency,daysOfWeek:"weekly"===e.frequency?e.daysOfWeek:void 0},imageUrl:e.image}),d.reset(),r(!1)}finally{n(!1)}}),className:"space-y-4",children:[(0,a.jsx)(Q,{control:d.control,name:"title",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Title"}),(0,a.jsx)(ea,{children:(0,a.jsx)(ei,{placeholder:"Enter todo title",...t})}),(0,a.jsx)(el,{})]})}}),(0,a.jsx)(Q,{control:d.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Description (optional)"}),(0,a.jsx)(ea,{children:(0,a.jsx)(en,{placeholder:"Enter more details about this todo",className:"resize-none",...t})}),(0,a.jsx)(el,{})]})}}),(0,a.jsx)(Q,{control:d.control,name:"image",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Image (optional)"}),(0,a.jsx)(ea,{children:(0,a.jsx)(ez,{value:t.value,onChange:t.onChange})}),(0,a.jsx)(el,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(Q,{control:d.control,name:"dueDate",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Due Date"}),(0,a.jsx)(ea,{children:(0,a.jsx)(ei,{type:"date",...t})}),(0,a.jsx)(el,{})]})}}),(0,a.jsx)(Q,{control:d.control,name:"dueTime",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Due Time"}),(0,a.jsx)(ea,{children:(0,a.jsx)(ei,{type:"time",...t})}),(0,a.jsx)(el,{})]})}})]}),(0,a.jsx)(Q,{control:d.control,name:"priority",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Priority"}),(0,a.jsxs)(eu,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,a.jsx)(ea,{children:(0,a.jsx)(ex,{children:(0,a.jsx)(em,{placeholder:"Select priority"})})}),(0,a.jsxs)(ep,{children:[(0,a.jsx)(ej,{value:"low",children:"Low"}),(0,a.jsx)(ej,{value:"medium",children:"Medium"}),(0,a.jsx)(ej,{value:"high",children:"High"})]})]}),(0,a.jsx)(el,{})]})}}),(0,a.jsx)(Q,{control:d.control,name:"isRecurring",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{className:"flex items-center justify-between",children:[(0,a.jsx)(er,{children:"Recurring Task"}),(0,a.jsx)(ea,{children:(0,a.jsx)(eb,{checked:t.value,onCheckedChange:t.onChange})})]})}}),o&&(0,a.jsx)(Q,{control:d.control,name:"frequency",render:e=>{let{field:t}=e;return(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Repeat Frequency"}),(0,a.jsxs)(eu,{onValueChange:t.onChange,value:t.value||void 0,children:[(0,a.jsx)(ea,{children:(0,a.jsx)(ex,{children:(0,a.jsx)(em,{placeholder:"Select frequency"})})}),(0,a.jsxs)(ep,{children:[(0,a.jsx)(ej,{value:"daily",children:"Daily"}),(0,a.jsx)(ej,{value:"weekly",children:"Weekly"})]})]}),(0,a.jsx)(el,{})]})}}),o&&"weekly"===c&&(0,a.jsx)(Q,{control:d.control,name:"daysOfWeek",render:()=>(0,a.jsxs)(et,{children:[(0,a.jsx)(er,{children:"Repeat on"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:eX.map(e=>(0,a.jsx)(Q,{control:d.control,name:"daysOfWeek",render:t=>{var r;let{field:s}=t;return(0,a.jsxs)(et,{className:"flex items-center space-x-1",children:[(0,a.jsx)(ea,{children:(0,a.jsx)(F,{checked:null===(r=s.value)||void 0===r?void 0:r.includes(e.value),onCheckedChange:t=>{let r=t?[...s.value||[],e.value]:(s.value||[]).filter(t=>t!==e.value);s.onChange(r)}})}),(0,a.jsx)(er,{className:"text-sm",children:e.label})]},e.value)}},e.value))}),(0,a.jsx)(el,{})]})}),(0,a.jsx)(B,{children:(0,a.jsx)(R,{type:"submit",disabled:i,children:i?"Adding...":"Add Todo"})})]})})]})})}function eK(e){let{open:t,onOpenChange:r}=e,{filters:s,setFilters:l}=g();return(0,a.jsx)(W,{open:t,onOpenChange:r,children:(0,a.jsxs)(_,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(M,{children:(0,a.jsx)(L,{children:"Filter & Sort"})}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)($,{htmlFor:"status",children:"Status"}),(0,a.jsxs)(eu,{value:s.status,onValueChange:e=>{l({status:e})},children:[(0,a.jsx)(ex,{id:"status",children:(0,a.jsx)(em,{placeholder:"Select status"})}),(0,a.jsxs)(ep,{children:[(0,a.jsx)(ej,{value:"all",children:"All"}),(0,a.jsx)(ej,{value:"active",children:"Active"}),(0,a.jsx)(ej,{value:"completed",children:"Completed"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)($,{htmlFor:"sortBy",children:"Sort By"}),(0,a.jsxs)(eu,{value:s.sortBy,onValueChange:e=>{l({sortBy:e})},children:[(0,a.jsx)(ex,{id:"sortBy",children:(0,a.jsx)(em,{placeholder:"Select sort"})}),(0,a.jsxs)(ep,{children:[(0,a.jsx)(ej,{value:"dueDate",children:"Due Date"}),(0,a.jsx)(ej,{value:"date",children:"Date Added"}),(0,a.jsx)(ej,{value:"priority",children:"Priority"}),(0,a.jsx)(ej,{value:"alphabetical",children:"Alphabetical"})]})]})]})]}),(0,a.jsx)(B,{children:(0,a.jsx)(R,{onClick:()=>r(!1),children:"Done"})})]})})}function e0(){let{todos:e}=g(),[t,r]=(0,s.useState)(!1),[l,i]=(0,s.useState)(!1),n=e.filter(e=>!e.completed).length,d=e.filter(e=>e.completed).length;return(0,a.jsxs)("div",{className:"mb-8 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(eG.Z,{className:"h-8 w-8 mr-2 text-primary"}),(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Todo List"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(R,{onClick:()=>i(!0),variant:"outline",size:"sm",className:"flex items-center gap-1",children:[(0,a.jsx)(eY.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Filter"})]}),(0,a.jsxs)(R,{onClick:()=>r(!0),size:"sm",className:"flex items-center gap-1",children:[(0,a.jsx)(e$.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Add Todo"})]})]})]}),(0,a.jsx)("div",{className:"flex justify-between items-center p-3 bg-card rounded-lg border shadow-sm",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:0===e.length?(0,a.jsx)("span",{children:"No todos yet. Add your first one!"}):(0,a.jsxs)("span",{children:[e.length," total, ",n," active, ",d," completed"]})})}),(0,a.jsx)(eQ,{open:t,onOpenChange:r}),(0,a.jsx)(eK,{open:l,onOpenChange:i})]})}var e1=r(91350);let e2=e=>{let{...t}=e,{theme:r="system"}=(0,e1.F)();return(0,a.jsx)(l.x7,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function e5(){return(0,a.jsx)("main",{className:"min-h-screen bg-background",children:(0,a.jsxs)(p,{children:[(0,a.jsxs)("div",{className:"container max-w-4xl mx-auto px-4 py-8",children:[(0,a.jsx)(e0,{}),(0,a.jsx)(eH,{})]}),(0,a.jsx)(e2,{position:"top-right"})]})})}}},function(e){e.O(0,[498,252,971,864,744],function(){return e(e.s=52246)}),_N_E=e.O()}]);