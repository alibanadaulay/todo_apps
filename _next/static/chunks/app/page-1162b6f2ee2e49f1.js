(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{52246:function(e,t,r){Promise.resolve().then(r.bind(r,80027))},80027:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return e1}});var a=r(57437),s=r(2265),l=r(71424),i=r(54829);let n="https://todobe-production-e862.up.railway.app/api/v1",d=e=>({id:e.id,title:e.title,description:e.description,completed:e.completed,createdAt:new Date(e.createdAt),dueDate:new Date(e.dueDate),priority:e.priority,imageUrl:e.imageUrl,updatedAt:e.updatedAt?new Date(e.updatedAt):void 0,recurring:{isRecurring:!1,frequency:null,daysOfWeek:[]}}),o=async()=>{let e=await i.Z.get("".concat(n,"/tasks"));if(!e.data||!e.data.data||!e.data.data.tasks)throw Error("Invalid response format");return e.data.data.tasks.map(d)},c=async e=>{let t={...e,dueDate:e.dueDate instanceof Date?e.dueDate.toISOString():e.dueDate},r=await i.Z.post("".concat(n,"/tasks"),t);if(!r.data||!r.data.data)throw Error("Invalid response format");return d(r.data.data)},u=async(e,t)=>{let r=await i.Z.put("".concat(n,"/tasks/").concat(e),t);if(!r.data||!r.data.data)throw Error("Invalid response format");return d(r.data.data)},m=async e=>{let t=await i.Z.delete("".concat(n,"/tasks/").concat(e));if(!t.data||!t.data.success)throw Error("Failed to delete task")},x=(0,s.createContext)(void 0),f=e=>({id:String(e.id),title:e.title,description:e.description,completed:e.completed,createdAt:new Date(e.createdAt),dueDate:new Date(e.dueDate),priority:e.priority,recurring:{isRecurring:!1,frequency:null}});function p(e){let{children:t}=e,[r,i]=(0,s.useState)([]),[n,d]=(0,s.useState)(!1),[p,h]=(0,s.useState)(null),[g,j]=(0,s.useState)({status:"all",sortBy:"date"});(0,s.useEffect)(()=>{let e=async()=>{try{d(!0),h(null);let e=await o();i(e.map(f))}catch(e){h("Failed to fetch todos"),console.error(e),l.Am.error("Failed to fetch todos")}finally{d(!1)}};e()},[]);let y=async e=>{try{d(!0),h(null);let t=await c({title:e.title,description:e.description,dueDate:e.dueDate,priority:e.priority,recurring:e.recurring,imageUrl:e.imageUrl});i(e=>[f(t),...e]),l.Am.success("Todo added successfully")}catch(e){h("Failed to add todo"),console.error(e),l.Am.error("Failed to add todo")}finally{d(!1)}},v=async(e,t)=>{try{d(!0),h(null);let r=await u(e,{title:t.title,description:t.description,completed:t.completed,dueDate:t.dueDate,priority:t.priority,recurring:t.recurring,imageUrl:t.imageUrl});i(t=>t.map(t=>t.id===e?f(r):t)),l.Am.success("Todo updated successfully")}catch(e){h("Failed to update todo"),console.error(e),l.Am.error("Failed to update todo")}finally{d(!1)}},b=async e=>{try{d(!0),h(null),await m(e),i(t=>t.filter(t=>t.id!==e)),l.Am.success("Todo removed successfully")}catch(e){h("Failed to delete todo"),console.error(e),l.Am.error("Failed to delete todo")}finally{d(!1)}},N=async e=>{let t=r.find(t=>t.id===e);if(t)try{d(!0),h(null);let r=await u(e,{title:t.title,description:t.description,completed:!t.completed,dueDate:t.dueDate,priority:t.priority,recurring:t.recurring,imageUrl:t.imageUrl});i(t=>t.map(t=>t.id===e?f(r):t))}catch(e){h("Failed to toggle todo"),console.error(e),l.Am.error("Failed to toggle todo")}finally{d(!1)}};return(0,a.jsx)(x.Provider,{value:{todos:r,filters:g,loading:n,error:p,addTodo:y,updateTodo:v,deleteTodo:b,toggleComplete:N,setFilters:e=>{j(t=>({...t,...e}))}},children:t})}function h(){let e=(0,s.useContext)(x);if(void 0===e)throw Error("useTodo must be used within a TodoProvider");return e}var g=r(6141),j=r(53905),y=r(45367),v=r(67256),b=r(39213),N=r(57042),w=r(74769);function k(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,w.m6)((0,N.W)(t))}let D=(0,b.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),C=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:i=!1,...n}=e,d=i?v.g7:"button";return(0,a.jsx)(d,{className:k(D({variant:s,size:l,className:r})),ref:t,...n})});C.displayName="Button";var R=r(66062),z=r(62442);let T=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(R.fC,{ref:t,className:k("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,a.jsx)(R.z$,{className:k("flex items-center justify-center text-current"),children:(0,a.jsx)(z.Z,{className:"h-4 w-4"})})})});T.displayName=R.fC.displayName;var F=r(88175),S=r(6834),A=r(12167),Z=r(74578),O=r(61865),q=r(38110),U=r(28712),W=r(82549);let I=U.fC;U.xz;let V=U.h_;U.x8;let E=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(U.aV,{ref:t,className:k("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});E.displayName=U.aV.displayName;let P=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(V,{children:[(0,a.jsx)(E,{}),(0,a.jsxs)(U.VY,{ref:t,className:k("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...l,children:[s,(0,a.jsxs)(U.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(W.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});P.displayName=U.VY.displayName;let _=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:k("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};_.displayName="DialogHeader";let M=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:k("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};M.displayName="DialogFooter";let B=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(U.Dx,{ref:t,className:k("text-lg font-semibold leading-none tracking-tight",r),...s})});B.displayName=U.Dx.displayName;let H=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(U.dk,{ref:t,className:k("text-sm text-muted-foreground",r),...s})});H.displayName=U.dk.displayName;var L=r(36743);let G=(0,b.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Y=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(L.f,{ref:t,className:k(G(),r),...s})});Y.displayName=L.f.displayName;let $=O.RV,J=s.createContext({}),Q=e=>{let{...t}=e;return(0,a.jsx)(J.Provider,{value:{name:t.name},children:(0,a.jsx)(O.Qr,{...t})})},X=()=>{let e=s.useContext(J),t=s.useContext(K),{getFieldState:r,formState:a}=(0,O.Gc)(),l=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},K=s.createContext({}),ee=s.forwardRef((e,t)=>{let{className:r,...l}=e,i=s.useId();return(0,a.jsx)(K.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:t,className:k("space-y-2",r),...l})})});ee.displayName="FormItem";let et=s.forwardRef((e,t)=>{let{className:r,...s}=e,{error:l,formItemId:i}=X();return(0,a.jsx)(Y,{ref:t,className:k(l&&"text-destructive",r),htmlFor:i,...s})});et.displayName="FormLabel";let er=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:l,formDescriptionId:i,formMessageId:n}=X();return(0,a.jsx)(v.g7,{ref:t,id:l,"aria-describedby":s?"".concat(i," ").concat(n):"".concat(i),"aria-invalid":!!s,...r})});er.displayName="FormControl";let ea=s.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:l}=X();return(0,a.jsx)("p",{ref:t,id:l,className:k("text-sm text-muted-foreground",r),...s})});ea.displayName="FormDescription";let es=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e,{error:i,formMessageId:n}=X(),d=i?String(null==i?void 0:i.message):s;return d?(0,a.jsx)("p",{ref:t,id:n,className:k("text-sm font-medium text-destructive",r),...l,children:d}):null});es.displayName="FormMessage";let el=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:k("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});el.displayName="Input";let ei=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:k("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});ei.displayName="Textarea";var en=r(5762),ed=r(83523),eo=r(9224);let ec=en.fC;en.ZA;let eu=en.B4,em=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(en.xz,{ref:t,className:k("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[s,(0,a.jsx)(en.JO,{asChild:!0,children:(0,a.jsx)(ed.Z,{className:"h-4 w-4 opacity-50"})})]})});em.displayName=en.xz.displayName;let ex=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(en.u_,{ref:t,className:k("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(eo.Z,{className:"h-4 w-4"})})});ex.displayName=en.u_.displayName;let ef=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(en.$G,{ref:t,className:k("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(ed.Z,{className:"h-4 w-4"})})});ef.displayName=en.$G.displayName;let ep=s.forwardRef((e,t)=>{let{className:r,children:s,position:l="popper",...i}=e;return(0,a.jsx)(en.h_,{children:(0,a.jsxs)(en.VY,{ref:t,className:k("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...i,children:[(0,a.jsx)(ex,{}),(0,a.jsx)(en.l_,{className:k("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(ef,{})]})})});ep.displayName=en.VY.displayName;let eh=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(en.__,{ref:t,className:k("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})});eh.displayName=en.__.displayName;let eg=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(en.ck,{ref:t,className:k("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(en.wU,{children:(0,a.jsx)(z.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(en.eT,{children:s})]})});eg.displayName=en.ck.displayName;let ej=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(en.Z0,{ref:t,className:k("-mx-1 my-1 h-px bg-muted",r),...s})});ej.displayName=en.Z0.displayName;var ey=r(92376);let ev=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(ey.fC,{className:k("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...s,ref:t,children:(0,a.jsx)(ey.bU,{className:k("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});ev.displayName=ey.fC.displayName;var eb=r(63715),eN=r(38438),ew=r(16691),ek=r.n(ew),eD=r(25566);let eC=eD.env.NEXT_PUBLIC_API_URL||"http://localhost:8080";function eR(e){let{value:t,onChange:r}=e,[i,n]=(0,s.useState)(!1),[d,o]=(0,s.useState)(t),c=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(a.type)){l.Am.error("Please upload a valid image file (JPEG, PNG, GIF, or WebP)");return}if(a.size>5242880){l.Am.error("Image size should be less than 5MB");return}try{n(!0);let e=new FormData;e.append("file",a);let t=await fetch("".concat(eC,"/api/upload"),{method:"POST",body:e});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to upload image")}let s=await t.json(),i="".concat(eC,"/").concat(s.path);o(i),r(i),l.Am.success(s.message||"Image uploaded successfully")}catch(e){console.error("Error uploading image:",e),l.Am.error(e instanceof Error?e.message:"Failed to upload image")}finally{n(!1)}}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(C,{type:"button",variant:"outline",className:"relative",onClick:()=>{var e;return null===(e=document.getElementById("image-upload"))||void 0===e?void 0:e.click()},disabled:i,children:[i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eb.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eN.Z,{className:"h-4 w-4 mr-2"}),"Upload Image"]}),(0,a.jsx)("input",{id:"image-upload",type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",className:"hidden",onChange:c,disabled:i})]}),d&&(0,a.jsx)(C,{type:"button",variant:"destructive",size:"icon",onClick:()=>{o(void 0),r(void 0)},disabled:i,children:(0,a.jsx)(W.Z,{className:"h-4 w-4"})})]}),d&&(0,a.jsx)("div",{className:"relative w-full h-48",children:(0,a.jsx)(ek(),{src:d,alt:"Todo image",fill:!0,className:"object-contain rounded-lg"})})]})}let ez=Z.z.object({title:Z.z.string().min(1,"Title is required").max(100),description:Z.z.string().max(500).optional(),priority:Z.z.enum(["low","medium","high"]),dueDate:Z.z.string().min(1,"Due date is required"),dueTime:Z.z.string().min(1,"Due time is required"),isRecurring:Z.z.boolean().default(!1),frequency:Z.z.enum(["daily","weekly"]).nullable(),daysOfWeek:Z.z.array(Z.z.number()).optional(),imageUrl:Z.z.string().optional()}),eT=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];function eF(e){let{todo:t,open:r,onOpenChange:l}=e,{updateTodo:i}=h(),[n,d]=(0,s.useState)(!1),o=(0,O.cI)({resolver:(0,q.F)(ez),defaultValues:{title:t.title,description:t.description||"",priority:t.priority,dueDate:(0,F.ZP)(t.dueDate,"yyyy-MM-dd"),dueTime:(0,F.ZP)(t.dueDate,"HH:mm"),isRecurring:t.recurring.isRecurring,frequency:t.recurring.frequency,daysOfWeek:t.recurring.daysOfWeek||[],imageUrl:t.imageUrl}}),c=o.watch("isRecurring"),u=o.watch("frequency");async function m(e){d(!0);try{let r=new Date("".concat(e.dueDate,"T").concat(e.dueTime));await i(t.id,{title:e.title,description:e.description,dueDate:r,priority:e.priority,recurring:{isRecurring:e.isRecurring,frequency:e.frequency,daysOfWeek:"weekly"===e.frequency?e.daysOfWeek:void 0},imageUrl:e.imageUrl}),l(!1)}finally{d(!1)}}return(0,a.jsx)(I,{open:r,onOpenChange:l,children:(0,a.jsxs)(P,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(_,{children:(0,a.jsx)(B,{children:"Edit Todo"})}),(0,a.jsx)($,{...o,children:(0,a.jsxs)("form",{onSubmit:o.handleSubmit(m),className:"space-y-4",children:[(0,a.jsx)(Q,{control:o.control,name:"title",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Title"}),(0,a.jsx)(er,{children:(0,a.jsx)(el,{placeholder:"Enter todo title",...t})}),(0,a.jsx)(es,{})]})}}),(0,a.jsx)(Q,{control:o.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Description"}),(0,a.jsx)(er,{children:(0,a.jsx)(ei,{placeholder:"Enter todo description (optional)",...t})}),(0,a.jsx)(es,{})]})}}),(0,a.jsx)(Q,{control:o.control,name:"imageUrl",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Image (optional)"}),(0,a.jsx)(er,{children:(0,a.jsx)(eR,{value:t.value,onChange:t.onChange})}),(0,a.jsx)(es,{})]})}}),(0,a.jsx)(Q,{control:o.control,name:"priority",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Priority"}),(0,a.jsxs)(ec,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,a.jsx)(er,{children:(0,a.jsx)(em,{children:(0,a.jsx)(eu,{placeholder:"Select priority"})})}),(0,a.jsxs)(ep,{children:[(0,a.jsx)(eg,{value:"low",children:"Low"}),(0,a.jsx)(eg,{value:"medium",children:"Medium"}),(0,a.jsx)(eg,{value:"high",children:"High"})]})]}),(0,a.jsx)(es,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(Q,{control:o.control,name:"dueDate",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Due Date"}),(0,a.jsx)(er,{children:(0,a.jsx)(el,{type:"date",...t})}),(0,a.jsx)(es,{})]})}}),(0,a.jsx)(Q,{control:o.control,name:"dueTime",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Due Time"}),(0,a.jsx)(er,{children:(0,a.jsx)(el,{type:"time",...t})}),(0,a.jsx)(es,{})]})}})]}),(0,a.jsx)(Q,{control:o.control,name:"isRecurring",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(et,{className:"text-base",children:"Recurring"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Make this todo repeat"})]}),(0,a.jsx)(er,{children:(0,a.jsx)(ev,{checked:t.value,onCheckedChange:t.onChange})})]})}}),c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Q,{control:o.control,name:"frequency",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Frequency"}),(0,a.jsxs)(ec,{onValueChange:t.onChange,defaultValue:t.value||void 0,children:[(0,a.jsx)(er,{children:(0,a.jsx)(em,{children:(0,a.jsx)(eu,{placeholder:"Select frequency"})})}),(0,a.jsxs)(ep,{children:[(0,a.jsx)(eg,{value:"daily",children:"Daily"}),(0,a.jsx)(eg,{value:"weekly",children:"Weekly"})]})]}),(0,a.jsx)(es,{})]})}}),"weekly"===u&&(0,a.jsx)(Q,{control:o.control,name:"daysOfWeek",render:()=>(0,a.jsxs)(ee,{children:[(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)(et,{children:"Days of Week"})}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:eT.map(e=>(0,a.jsx)(Q,{control:o.control,name:"daysOfWeek",render:t=>{var r;let{field:s}=t;return(0,a.jsxs)(ee,{className:"flex flex-row items-start space-x-0 space-y-0",children:[(0,a.jsx)(er,{children:(0,a.jsx)(T,{checked:null===(r=s.value)||void 0===r?void 0:r.includes(e.value),onCheckedChange:t=>{let r=s.value||[];return t?s.onChange([...r,e.value]):s.onChange(r.filter(t=>t!==e.value))}})}),(0,a.jsx)(et,{className:"font-normal ml-2",children:e.label})]},e.value)}},e.value))}),(0,a.jsx)(es,{})]})})]}),(0,a.jsx)(M,{children:(0,a.jsx)(C,{type:"submit",disabled:n,children:n?"Saving...":"Save Changes"})})]})})]})})}var eS=r(52506);let eA=eS.fC;eS.xz;let eZ=eS.h_,eO=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(eS.aV,{className:k("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:t})});eO.displayName=eS.aV.displayName;let eq=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsxs)(eZ,{children:[(0,a.jsx)(eO,{}),(0,a.jsx)(eS.VY,{ref:t,className:k("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});eq.displayName=eS.VY.displayName;let eU=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:k("flex flex-col space-y-2 text-center sm:text-left",t),...r})};eU.displayName="AlertDialogHeader";let eW=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:k("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};eW.displayName="AlertDialogFooter";let eI=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(eS.Dx,{ref:t,className:k("text-lg font-semibold",r),...s})});eI.displayName=eS.Dx.displayName;let eV=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(eS.dk,{ref:t,className:k("text-sm text-muted-foreground",r),...s})});eV.displayName=eS.dk.displayName;let eE=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(eS.aU,{ref:t,className:k(D(),r),...s})});eE.displayName=eS.aU.displayName;let eP=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(eS.$j,{ref:t,className:k(D({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});function e_(e){let{todoId:t,todoTitle:r,open:s,onOpenChange:l}=e,{deleteTodo:i}=h(),n=async()=>{try{await i(t),l(!1)}catch(e){console.error("Failed to delete todo:",e)}};return(0,a.jsx)(eA,{open:s,onOpenChange:l,children:(0,a.jsxs)(eq,{children:[(0,a.jsxs)(eU,{children:[(0,a.jsx)(eI,{children:"Are you sure?"}),(0,a.jsxs)(eV,{children:['This will permanently delete the todo "',r,'" and cannot be undone.']})]}),(0,a.jsxs)(eW,{children:[(0,a.jsx)(eP,{children:"Cancel"}),(0,a.jsx)(eE,{onClick:n,className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})})}function eM(e){var t;let{todo:r}=e,{toggleComplete:l}=h(),[i,n]=(0,s.useState)(!1),[d,o]=(0,s.useState)(!1),c=function(e){switch(e){case"high":return"text-red-500 border-red-500";case"medium":return"text-amber-500 border-amber-500";case"low":return"text-green-500 border-green-500";default:return"text-slate-500 border-slate-500"}}(r.priority),u=function(e){if(!e.recurring.isRecurring)return"";if("daily"===e.recurring.frequency)return"Repeats daily";if("weekly"===e.recurring.frequency&&e.recurring.daysOfWeek){let t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=e.recurring.daysOfWeek.map(e=>t[e]).join(", ");return"Repeats weekly on ".concat(r)}return""}(r);return(0,a.jsxs)("div",{className:k("p-4 border rounded-lg transition-all bg-card","hover:shadow-md",r.completed&&"bg-muted/40"),children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(T,{checked:r.completed,onCheckedChange:()=>l(r.id),className:"mt-1"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsx)("h3",{className:k("font-medium truncate",r.completed&&"line-through text-muted-foreground"),children:r.title}),(0,a.jsx)("div",{className:"flex items-center gap-1 shrink-0",children:(0,a.jsx)("span",{className:k("text-xs px-2 py-0.5 rounded-full border capitalize",c),children:r.priority})})]}),r.description&&(0,a.jsx)("p",{className:k("text-sm mt-1 text-muted-foreground",r.completed&&"line-through"),children:r.description}),r.imageUrl&&(0,a.jsx)("div",{className:"relative w-full h-48 mt-2",children:(0,a.jsx)(ek(),{src:r.imageUrl,alt:"".concat(r.title," image"),fill:!0,className:"object-contain rounded-lg"})}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2 text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(g.Z,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{children:(t=r.dueDate,(0,S.Z)(t)?"Today at ".concat((0,F.ZP)(t,"h:mm a")):(0,A.Z)(t)?"Tomorrow at ".concat((0,F.ZP)(t,"h:mm a")):(0,F.ZP)(t,"MMM d, yyyy h:mm a"))})]}),u&&(0,a.jsx)("span",{className:"px-1.5 py-0.5 bg-secondary rounded-full",children:u})]}),(0,a.jsxs)("div",{className:"flex items-center mt-2 pt-2 border-t text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Created ",r.createdAt.toLocaleDateString()]}),(0,a.jsxs)("div",{className:"flex ml-auto gap-1",children:[(0,a.jsxs)(C,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>n(!0),children:[(0,a.jsx)(j.Z,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,a.jsxs)(C,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive",onClick:()=>o(!0),children:[(0,a.jsx)(y.Z,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{className:"sr-only",children:"Delete"})]})]})]})]})]}),(0,a.jsx)(eF,{todo:r,open:i,onOpenChange:n}),(0,a.jsx)(e_,{todoId:r.id,todoTitle:r.title,open:d,onOpenChange:o})]})}eP.displayName=eS.$j.displayName;var eB=r(6379);function eH(){let e;let{todos:t,filters:r}=h(),s=(e=[...t],"active"===r.status?e=e.filter(e=>!e.completed):"completed"===r.status&&(e=e.filter(e=>e.completed)),e.sort((e,t)=>{switch(r.sortBy){case"alphabetical":return e.title.localeCompare(t.title);case"date":return t.createdAt.getTime()-e.createdAt.getTime();case"dueDate":return e.dueDate.getTime()-t.dueDate.getTime();case"priority":let a={high:3,medium:2,low:1};return a[t.priority]-a[e.priority];default:return 0}}),e);return 0===t.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-center border rounded-lg bg-card",children:[(0,a.jsx)(eB.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-1",children:"No todos yet"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Add your first todo to get started"})]}):0===s.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-center border rounded-lg bg-card",children:[(0,a.jsx)(eB.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-1",children:"No matching todos"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Try changing your filters"})]}):(0,a.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,a.jsx)(eM,{todo:e},e.id))})}var eL=r(62681),eG=r(42482),eY=r(9883);let e$=Z.z.object({title:Z.z.string().min(1,"Title is required").max(100),description:Z.z.string().max(500).optional(),priority:Z.z.enum(["low","medium","high"]).default("medium"),dueDate:Z.z.string().min(1,"Due date is required"),dueTime:Z.z.string().min(1,"Due time is required"),isRecurring:Z.z.boolean().default(!1),frequency:Z.z.enum(["daily","weekly"]).nullable(),daysOfWeek:Z.z.array(Z.z.number()).optional(),image:Z.z.string().optional()}),eJ=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];function eQ(e){let{open:t,onOpenChange:r}=e,{addTodo:l}=h(),[i,n]=(0,s.useState)(!1),d=(0,O.cI)({resolver:(0,q.F)(e$),defaultValues:{title:"",description:"",priority:"medium",dueDate:(0,F.ZP)(new Date,"yyyy-MM-dd"),dueTime:(0,F.ZP)(new Date,"HH:mm"),isRecurring:!1,frequency:null,daysOfWeek:[],image:void 0}}),o=d.watch("isRecurring"),c=d.watch("frequency");return(0,a.jsx)(I,{open:t,onOpenChange:r,children:(0,a.jsxs)(P,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(_,{children:(0,a.jsx)(B,{children:"Add New Todo"})}),(0,a.jsx)($,{...d,children:(0,a.jsxs)("form",{onSubmit:d.handleSubmit(function(e){n(!0);try{let t=new Date("".concat(e.dueDate,"T").concat(e.dueTime));l({title:e.title,description:e.description,completed:!1,dueDate:t,priority:e.priority,recurring:{isRecurring:e.isRecurring,frequency:e.frequency,daysOfWeek:"weekly"===e.frequency?e.daysOfWeek:void 0},imageUrl:e.image}),d.reset(),r(!1)}finally{n(!1)}}),className:"space-y-4",children:[(0,a.jsx)(Q,{control:d.control,name:"title",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Title"}),(0,a.jsx)(er,{children:(0,a.jsx)(el,{placeholder:"Enter todo title",...t})}),(0,a.jsx)(es,{})]})}}),(0,a.jsx)(Q,{control:d.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Description (optional)"}),(0,a.jsx)(er,{children:(0,a.jsx)(ei,{placeholder:"Enter more details about this todo",className:"resize-none",...t})}),(0,a.jsx)(es,{})]})}}),(0,a.jsx)(Q,{control:d.control,name:"image",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Image (optional)"}),(0,a.jsx)(er,{children:(0,a.jsx)(eR,{value:t.value,onChange:t.onChange})}),(0,a.jsx)(es,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(Q,{control:d.control,name:"dueDate",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Due Date"}),(0,a.jsx)(er,{children:(0,a.jsx)(el,{type:"date",...t})}),(0,a.jsx)(es,{})]})}}),(0,a.jsx)(Q,{control:d.control,name:"dueTime",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Due Time"}),(0,a.jsx)(er,{children:(0,a.jsx)(el,{type:"time",...t})}),(0,a.jsx)(es,{})]})}})]}),(0,a.jsx)(Q,{control:d.control,name:"priority",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Priority"}),(0,a.jsxs)(ec,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,a.jsx)(er,{children:(0,a.jsx)(em,{children:(0,a.jsx)(eu,{placeholder:"Select priority"})})}),(0,a.jsxs)(ep,{children:[(0,a.jsx)(eg,{value:"low",children:"Low"}),(0,a.jsx)(eg,{value:"medium",children:"Medium"}),(0,a.jsx)(eg,{value:"high",children:"High"})]})]}),(0,a.jsx)(es,{})]})}}),(0,a.jsx)(Q,{control:d.control,name:"isRecurring",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{className:"flex items-center justify-between",children:[(0,a.jsx)(et,{children:"Recurring Task"}),(0,a.jsx)(er,{children:(0,a.jsx)(ev,{checked:t.value,onCheckedChange:t.onChange})})]})}}),o&&(0,a.jsx)(Q,{control:d.control,name:"frequency",render:e=>{let{field:t}=e;return(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Repeat Frequency"}),(0,a.jsxs)(ec,{onValueChange:t.onChange,value:t.value||void 0,children:[(0,a.jsx)(er,{children:(0,a.jsx)(em,{children:(0,a.jsx)(eu,{placeholder:"Select frequency"})})}),(0,a.jsxs)(ep,{children:[(0,a.jsx)(eg,{value:"daily",children:"Daily"}),(0,a.jsx)(eg,{value:"weekly",children:"Weekly"})]})]}),(0,a.jsx)(es,{})]})}}),o&&"weekly"===c&&(0,a.jsx)(Q,{control:d.control,name:"daysOfWeek",render:()=>(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Repeat on"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:eJ.map(e=>(0,a.jsx)(Q,{control:d.control,name:"daysOfWeek",render:t=>{var r;let{field:s}=t;return(0,a.jsxs)(ee,{className:"flex items-center space-x-1",children:[(0,a.jsx)(er,{children:(0,a.jsx)(T,{checked:null===(r=s.value)||void 0===r?void 0:r.includes(e.value),onCheckedChange:t=>{let r=t?[...s.value||[],e.value]:(s.value||[]).filter(t=>t!==e.value);s.onChange(r)}})}),(0,a.jsx)(et,{className:"text-sm",children:e.label})]},e.value)}},e.value))}),(0,a.jsx)(es,{})]})}),(0,a.jsx)(M,{children:(0,a.jsx)(C,{type:"submit",disabled:i,children:i?"Adding...":"Add Todo"})})]})})]})})}function eX(e){let{open:t,onOpenChange:r}=e,{filters:s,setFilters:l}=h();return(0,a.jsx)(I,{open:t,onOpenChange:r,children:(0,a.jsxs)(P,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(_,{children:(0,a.jsx)(B,{children:"Filter & Sort"})}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(Y,{htmlFor:"status",children:"Status"}),(0,a.jsxs)(ec,{value:s.status,onValueChange:e=>{l({status:e})},children:[(0,a.jsx)(em,{id:"status",children:(0,a.jsx)(eu,{placeholder:"Select status"})}),(0,a.jsxs)(ep,{children:[(0,a.jsx)(eg,{value:"all",children:"All"}),(0,a.jsx)(eg,{value:"active",children:"Active"}),(0,a.jsx)(eg,{value:"completed",children:"Completed"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(Y,{htmlFor:"sortBy",children:"Sort By"}),(0,a.jsxs)(ec,{value:s.sortBy,onValueChange:e=>{l({sortBy:e})},children:[(0,a.jsx)(em,{id:"sortBy",children:(0,a.jsx)(eu,{placeholder:"Select sort"})}),(0,a.jsxs)(ep,{children:[(0,a.jsx)(eg,{value:"dueDate",children:"Due Date"}),(0,a.jsx)(eg,{value:"date",children:"Date Added"}),(0,a.jsx)(eg,{value:"priority",children:"Priority"}),(0,a.jsx)(eg,{value:"alphabetical",children:"Alphabetical"})]})]})]})]}),(0,a.jsx)(M,{children:(0,a.jsx)(C,{onClick:()=>r(!1),children:"Done"})})]})})}function eK(){let{todos:e}=h(),[t,r]=(0,s.useState)(!1),[l,i]=(0,s.useState)(!1),n=e.filter(e=>!e.completed).length,d=e.filter(e=>e.completed).length;return(0,a.jsxs)("div",{className:"mb-8 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(eL.Z,{className:"h-8 w-8 mr-2 text-primary"}),(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Todo List"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(C,{onClick:()=>i(!0),variant:"outline",size:"sm",className:"flex items-center gap-1",children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Filter"})]}),(0,a.jsxs)(C,{onClick:()=>r(!0),size:"sm",className:"flex items-center gap-1",children:[(0,a.jsx)(eY.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Add Todo"})]})]})]}),(0,a.jsx)("div",{className:"flex justify-between items-center p-3 bg-card rounded-lg border shadow-sm",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:0===e.length?(0,a.jsx)("span",{children:"No todos yet. Add your first one!"}):(0,a.jsxs)("span",{children:[e.length," total, ",n," active, ",d," completed"]})})}),(0,a.jsx)(eQ,{open:t,onOpenChange:r}),(0,a.jsx)(eX,{open:l,onOpenChange:i})]})}var e0=r(91350);let e2=e=>{let{...t}=e,{theme:r="system"}=(0,e0.F)();return(0,a.jsx)(l.x7,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function e1(){return(0,a.jsx)("main",{className:"min-h-screen bg-background",children:(0,a.jsxs)(p,{children:[(0,a.jsxs)("div",{className:"container max-w-4xl mx-auto px-4 py-8",children:[(0,a.jsx)(eK,{}),(0,a.jsx)(eH,{})]}),(0,a.jsx)(e2,{position:"top-right"})]})})}}},function(e){e.O(0,[498,252,971,864,744],function(){return e(e.s=52246)}),_N_E=e.O()}]);